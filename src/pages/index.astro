---
import { getCollection } from "astro:content";
import BaseLayout from "@/layouts/BaseLayout.astro";

const recipes = await getCollection("recipes");
const sorted = recipes.sort((a, b) => a.data.title.localeCompare(b.data.title));
---

<BaseLayout title="Recipes">
  <div class="mb-10">
    <h1 class="font-display text-5xl mb-2">Recipes</h1>
    <p class="text-text-secondary text-lg">{sorted.length} recipes in the collection</p>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
    {
      sorted.map((recipe) => (
        <a
          href={`${import.meta.env.BASE_URL}recipes/${recipe.id}/`}
          class="group block rounded-xl border border-border bg-bg-surface/50 px-5 py-4 transition-all hover:border-accent/30 hover:bg-accent-subtle hover:shadow-sm"
        >
          <span class="font-display text-lg font-medium text-text group-hover:text-accent transition-colors">
            {recipe.data.title}
          </span>
          {recipe.data.category !== "main" && (
            <span class="ml-2 inline-block rounded-full bg-bg-elevated px-2 py-0.5 text-xs font-medium text-text-muted">
              {recipe.data.category}
            </span>
          )}
        </a>
      ))
    }
  </div>
</BaseLayout>
