---
import { getCollection } from "astro:content";
import BaseLayout from "@/layouts/BaseLayout.astro";

const recipes = await getCollection("recipes");
const sorted = recipes.sort((a, b) => a.data.title.localeCompare(b.data.title));
---

<BaseLayout title="Recipes">
  <div class="mb-10">
    <h1 class="font-display text-5xl mb-2">Recipes</h1>
    <p class="text-ink-light text-lg">{sorted.length} recipes in the collection</p>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
    {
      sorted.map((recipe) => (
        <a
          href={`/cookfolio/recipes/${recipe.id.replace(/\.md$/, "")}/`}
          class="group block rounded-xl border border-parchment bg-cream-dark/50 px-5 py-4 transition-all hover:border-terracotta/30 hover:bg-cream-dark hover:shadow-sm"
        >
          <span class="font-display text-lg text-ink group-hover:text-terracotta transition-colors">
            {recipe.data.title}
          </span>
          {recipe.data.category !== "main" && (
            <span class="ml-2 inline-block rounded-full bg-parchment px-2 py-0.5 text-xs font-medium text-ink-light">
              {recipe.data.category}
            </span>
          )}
        </a>
      ))
    }
  </div>
</BaseLayout>
